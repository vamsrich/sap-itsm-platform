# ══════════════════════════════════════════════════════════════
# SAP ITSM Platform — Environment Configuration
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# ══════════════════════════════════════════════════════════════

# ── Application ───────────────────────────────────────────────
NODE_ENV=production
PORT=3001
LOG_LEVEL=info

# ── PostgreSQL ────────────────────────────────────────────────
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=itsm_db
POSTGRES_USER=itsm_user
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_32CHARS

# Full connection string (auto-composed in docker-compose)
DATABASE_URL=postgresql://itsm_user:CHANGE_THIS_STRONG_PASSWORD_32CHARS@postgres:5432/itsm_db?schema=public

# ── Redis ─────────────────────────────────────────────────────
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD_32CHARS
REDIS_DB=0

# ── JWT Secrets (MUST be unique, 64+ chars each) ──────────────
JWT_ACCESS_SECRET=CHANGE_THIS_ACCESS_SECRET_MINIMUM_64_CHARACTERS_LONG_FOR_SECURITY
JWT_REFRESH_SECRET=CHANGE_THIS_REFRESH_SECRET_MINIMUM_64_CHARACTERS_LONG_DIFFERENT
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# ── Password Hashing ──────────────────────────────────────────
BCRYPT_ROUNDS=12

# ── Email / SMTP ──────────────────────────────────────────────
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM_NAME=SAP ITSM Platform
SMTP_FROM_EMAIL=noreply@yourcompany.com

# For AWS SES:
# SMTP_HOST=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_USER=AKIAIOSFODNN7EXAMPLE
# SMTP_PASS=your-ses-smtp-password

# For SendGrid:
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASS=your-sendgrid-api-key

# ── Frontend URLs ─────────────────────────────────────────────
PORTAL_URL=https://itsm.yourcompany.com
CORS_ORIGINS=https://itsm.yourcompany.com,https://admin.itsm.yourcompany.com

# For local dev:
# PORTAL_URL=http://localhost:3000
# CORS_ORIGINS=http://localhost:3000

# ── Frontend (Vite build-time) ────────────────────────────────
VITE_API_URL=/api/v1

# ── Docker Compose Ports ──────────────────────────────────────
BACKEND_PORT=3001
FRONTEND_PORT=3000
POSTGRES_EXPOSED_PORT=5432
REDIS_EXPOSED_PORT=6379
PGADMIN_PORT=5050
PGADMIN_EMAIL=admin@itsm.local
PGADMIN_PASSWORD=admin123

# ── Rate Limiting ─────────────────────────────────────────────
# (configured in code, override via env if needed)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=500
LOGIN_RATE_LIMIT_MAX=10
